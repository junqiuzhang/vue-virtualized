var e=Object.defineProperty,t=Object.defineProperties,r=Object.getOwnPropertyDescriptors,o=Object.getOwnPropertySymbols,u=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable,n=(t,r,o)=>r in t?e(t,r,{enumerable:!0,configurable:!0,writable:!0,value:o}):t[r]=o,l=(e,t)=>{for(var r in t||(t={}))u.call(t,r)&&n(e,r,t[r]);if(o)for(var r of o(t))i.call(t,r)&&n(e,r,t[r]);return e};import{defineComponent as p,ref as a,watch as d,createVNode as m}from"vue";const c={position:"absolute"},s=p({props:{width:{type:Number,required:!0},height:{type:Number,required:!0},itemCount:{type:Object,required:!0},itemSize:{type:Object,required:!0},renderItem:{type:Function,required:!0},reRenderCount:{type:Number,required:!1,default:1},preRenderPageNumber:{type:Number,required:!1,default:1}},setup(e){const o=a(null),u=a([]),i={value:0},n=()=>"function"==typeof e.itemCount?e.itemCount():"number"==typeof e.itemCount?e.itemCount:0,p=t=>"function"==typeof e.itemSize?e.itemSize(t):"number"==typeof e.itemSize?e.itemSize:0,s=()=>{const i=n(),p=[];if(!o.value)return[];if(!e.renderItem)return[];const a=o.value.scrollTop+(1+e.preRenderPageNumber)*e.height,d=o.value.scrollTop-e.preRenderPageNumber*e.height;for(let o=0;o<i;o++){const i=u.value[o],n=u.value[o+1];i<a&&n>d&&p.push(e.renderItem({index:o,style:(m=l({},c),s={top:`${i}px`},t(m,r(s)))}))}var m,s;return p},v=()=>{const e=n(),t=[0];let r=0;for(let o=0;o<e;o++)r+=p(o),t.push(r);u.value=t},b=()=>{var t,r;const u=null!=(r=null==(t=o.value)?void 0:t.scrollTop)?r:0,n=u-i.value,l=e.height;n<l&&n>-l||(i.value=u,v())};return d((()=>e.reRenderCount),(()=>{v()})),v(),()=>m("div",{ref:o,style:{width:`${e.width}px`,height:`${e.height}px`,overflow:"auto"},onScroll:b},[m("div",{style:{position:"relative",height:`${u.value[u.value.length-1]}px`}},[s()])])}});export default s;
