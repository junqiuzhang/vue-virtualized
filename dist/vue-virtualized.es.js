var e=Object.defineProperty,t=Object.defineProperties,r=Object.getOwnPropertyDescriptors,o=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable,u=(t,r,o)=>r in t?e(t,r,{enumerable:!0,configurable:!0,writable:!0,value:o}):t[r]=o,l=(e,t)=>{for(var r in t||(t={}))n.call(t,r)&&u(e,r,t[r]);if(o)for(var r of o(t))i.call(t,r)&&u(e,r,t[r]);return e};import{defineComponent as p,ref as m,watch as a,createVNode as v}from"vue";const s={position:"absolute"},c=p({props:{width:Number,height:Number,itemCount:Number,itemSize:Number,reRenderItem:Number,renderItem:Function},setup(e){var o;const n=m(null),i=m([]),u={value:0},p=null!=(o=e.height)?o:1,c=()=>{let o=0;"function"==typeof e.itemCount?o=e.itemCount():"number"==typeof e.itemCount&&(o=e.itemCount);const u=[];if(!n.value)return[];if(!e.renderItem)return[];for(let a=0;a<o;a++){const o=i.value[a],v=i.value[a+1]-i.value[a];o<n.value.scrollTop+2*e.height&&o+v>n.value.scrollTop-e.height&&u.push(e.renderItem({index:a,style:(p=l({},s),m={top:`${o}px`},t(p,r(m)))}))}var p,m;return u},f=()=>{let t=0;"function"==typeof e.itemCount?t=e.itemCount():"number"==typeof e.itemCount&&(t=e.itemCount);const r=[0];let o=0;for(let n=0;n<t;n++)"function"==typeof e.itemSize?o+=e.itemSize(n):"number"==typeof e.itemSize&&(o+=e.itemSize),r.push(o);i.value=r},h=()=>{var e,t;const r=null!=(t=null==(e=n.value)?void 0:e.scrollTop)?t:0,o=r-u.value;o<p&&o>-p||(u.value=r,f())};return a((()=>e.reRenderItem),(()=>{f()})),f(),()=>v("div",{ref:n,style:{width:`${e.width}px`,height:`${e.height}px`,overflow:"auto"},onScroll:h},[v("div",{style:{position:"relative",height:`${i.value[i.value.length-1]}px`}},[c()])])}});export default c;
