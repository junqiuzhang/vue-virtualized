var e=Object.defineProperty,t=Object.defineProperties,r=Object.getOwnPropertyDescriptors,o=Object.getOwnPropertySymbols,l=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable,n=(t,r,o)=>r in t?e(t,r,{enumerable:!0,configurable:!0,writable:!0,value:o}):t[r]=o,u=(e,t)=>{for(var r in t||(t={}))l.call(t,r)&&n(e,r,t[r]);if(o)for(var r of o(t))i.call(t,r)&&n(e,r,t[r]);return e};import{defineComponent as a,ref as p,watch as v,createVNode as s}from"vue";const c={position:"absolute"},m=a({props:{width:Number,height:Number,itemCount:Number,itemSize:Function,reRenderItem:Number,renderItem:Function},setup(e){var o;const l=p(null),i=p([]),n={value:0},a=null!=(o=e.height)?o:1,m=()=>{const o=e.itemCount||0,n=[];if(!l.value)return[];if(!e.renderItem)return[];for(let v=0;v<o;v++){const o=i.value[v],s=i.value[v+1]-i.value[v];o<l.value.scrollTop+2*e.height&&o+s>l.value.scrollTop-e.height&&n.push(e.renderItem({index:v,style:(a=u({},c),p={top:`${o}px`},t(a,r(p)))}))}var a,p;return n},h=()=>{const t=e.itemCount||0,r=[0];let o=0;for(let l=0;l<t;l++)"function"==typeof e.itemSize?o+=e.itemSize(l):"number"==typeof e.itemSize&&(o+=e.itemSize),r.push(o);i.value=r},f=()=>{var e,t;const r=null!=(t=null==(e=l.value)?void 0:e.scrollTop)?t:0,o=r-n.value;o<a&&o>-a||(n.value=r,h())};return v((()=>e.reRenderItem),(()=>{h()})),h(),()=>s("div",{ref:l,style:{width:`${e.width}px`,height:`${e.height}px`,overflow:"auto"},onScroll:f},[s("div",{style:{position:"relative",height:`${i.value[i.value.length-1]}px`}},[m()])])}});export default m;
