var e=Object.defineProperty,t=Object.defineProperties,r=Object.getOwnPropertyDescriptors,o=Object.getOwnPropertySymbols,u=Object.prototype.hasOwnProperty,n=Object.prototype.propertyIsEnumerable,i=(t,r,o)=>r in t?e(t,r,{enumerable:!0,configurable:!0,writable:!0,value:o}):t[r]=o,l=(e,t)=>{for(var r in t||(t={}))u.call(t,r)&&i(e,r,t[r]);if(o)for(var r of o(t))n.call(t,r)&&i(e,r,t[r]);return e};import{defineComponent as p,ref as a,watch as d,createVNode as s}from"vue";const h={position:"absolute"},c=p({props:{width:{type:Number,required:!0},height:{type:Number,required:!0},itemCount:{type:Number,required:!0,default:0},itemSize:{type:Function,required:!0,default:()=>0},renderItem:{type:Function,required:!0},reRenderCount:{type:Number,required:!1,default:1},preRenderPageCount:{type:Number,required:!1,default:1}},setup(e){const o=a(0),u=a([]),n=o=>{const n=e.itemCount,i=[];if(!e.renderItem)return[];const p=o+(1+e.preRenderPageCount)*e.height,a=o-e.preRenderPageCount*e.height;for(let c=0;c<n;c++){const o=u.value[c],n=u.value[c+1];if(o<p&&n>a)i.push(e.renderItem({index:c,style:(d=l({},h),s={top:`${o}px`},t(d,r(s)))}));else if(i.length>0)break}var d,s;return i},i=()=>{const t=e.itemCount,r=[0];let o=0;for(let u=0;u<t;u++)o+=e.itemSize(u),r.push(o);u.value=r},p=t=>{var r,u;const n=null!=(u=null==(r=t.target)?void 0:r.scrollTop)?u:0,i=n-o.value,l=e.height/2;i<l&&i>-l||(o.value=n)};return d((()=>e.reRenderCount),(()=>{i()})),i(),()=>s("div",{style:{width:`${e.width}px`,height:`${e.height}px`,overflow:"auto"},onScroll:p},[s("div",{style:{position:"relative",height:`${u.value[u.value.length-1]}px`}},[n(o.value)])])}});export default c;
