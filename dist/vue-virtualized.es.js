var e=Object.defineProperty,t=Object.defineProperties,n=Object.getOwnPropertyDescriptors,r=Object.getOwnPropertySymbols,i=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable,u=(t,n,r)=>n in t?e(t,n,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[n]=r,f=(e,t)=>{for(var n in t||(t={}))i.call(t,n)&&u(e,n,t[n]);if(r)for(var n of r(t))o.call(t,n)&&u(e,n,t[n]);return e};import{defineComponent as a,ref as l,createVNode as c}from"vue";var p="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},s=/^\s+|\s+$/g,v=/^[-+]0x[0-9a-f]+$/i,d=/^0b[01]+$/i,b=/^0o[0-7]+$/i,m=parseInt,y="object"==typeof p&&p&&p.Object===Object&&p,h="object"==typeof self&&self&&self.Object===Object&&self,g=y||h||Function("return this")(),w=Object.prototype.toString,j=Math.max,O=Math.min,x=function(){return g.Date.now()};function T(e,t,n){var r,i,o,u,f,a,l=0,c=!1,p=!1,s=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function v(t){var n=r,o=i;return r=i=void 0,l=t,u=e.apply(o,n)}function d(e){return l=e,f=setTimeout(m,t),c?v(e):u}function b(e){var n=e-a;return void 0===a||n>=t||n<0||p&&e-l>=o}function m(){var e=x();if(b(e))return y(e);f=setTimeout(m,function(e){var n=t-(e-a);return p?O(n,o-(e-l)):n}(e))}function y(e){return f=void 0,s&&r?v(e):(r=i=void 0,u)}function h(){var e=x(),n=b(e);if(r=arguments,i=this,a=e,n){if(void 0===f)return d(a);if(p)return f=setTimeout(m,t),v(a)}return void 0===f&&(f=setTimeout(m,t)),u}return t=N(t)||0,S(n)&&(c=!!n.leading,o=(p="maxWait"in n)?j(N(n.maxWait)||0,t):o,s="trailing"in n?!!n.trailing:s),h.cancel=function(){void 0!==f&&clearTimeout(f),l=0,r=a=i=f=void 0},h.flush=function(){return void 0===f?u:y(x())},h}function S(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function N(e){if("number"==typeof e)return e;if(function(e){return"symbol"==typeof e||function(e){return!!e&&"object"==typeof e}(e)&&"[object Symbol]"==w.call(e)}(e))return NaN;if(S(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=S(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(s,"");var n=d.test(e);return n||b.test(e)?m(e.slice(2),n?2:8):v.test(e)?NaN:+e}var $=function(e,t,n){var r=!0,i=!0;if("function"!=typeof e)throw new TypeError("Expected a function");return S(n)&&(r="leading"in n?!!n.leading:r,i="trailing"in n?!!n.trailing:i),T(e,t,{leading:r,maxWait:t,trailing:i})};const C={position:"absolute"},z=a({props:{width:Number,height:Number,itemCount:Number,itemSize:Function,renderCount:Number,renderItem:Function},setup(e,r){const i=l(null),o=l([]),u=l(),a=()=>{const r=e.itemCount||0,u=[];if(!i.value)return[];if(!e.renderItem)return[];for(let c=0;c<r;c++){const r=o.value[c],p=o.value[c+1]-o.value[c];r<i.value.scrollTop+2*e.height&&r+p>i.value.scrollTop-e.height&&u.push(e.renderItem({index:c,style:(a=f({},C),l={top:`${r}px`},t(a,n(l)))}))}var a,l;return u},p=()=>{const t=e.itemCount||0,n=[0];let r=0;for(let i=0;i<t;i++)"function"==typeof e.itemSize?r+=e.itemSize(i):"number"==typeof e.itemSize&&(r+=e.itemSize),n.push(r);o.value=n};return()=>(e.renderCount!==u.value&&(p(),u.value=e.renderCount),c("div",{ref:i,style:{width:`${e.width}px`,height:`${e.height}px`,overflow:"auto"},onScroll:$(p,10)},[c("div",{style:{position:"relative",height:`${o.value[o.value.length-1]}px`}},[a()])]))}});export default z;
