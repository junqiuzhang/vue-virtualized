var e=Object.defineProperty,t=Object.defineProperties,r=Object.getOwnPropertyDescriptors,u=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable,n=(t,r,u)=>r in t?e(t,r,{enumerable:!0,configurable:!0,writable:!0,value:u}):t[r]=u,l=(e,t)=>{for(var r in t||(t={}))o.call(t,r)&&n(e,r,t[r]);if(u)for(var r of u(t))i.call(t,r)&&n(e,r,t[r]);return e};import{defineComponent as p,createVNode as a,Fragment as d,ref as f,watch as s}from"vue";const m={position:"absolute"},c=p({props:{width:{type:Number,required:!0,default:0},height:{type:Number,required:!0,default:0},itemCount:{type:Number,required:!0,default:0},itemSize:{type:[Number,Function],required:!0,default:0},renderItem:{type:Function,required:!0,default:()=>a(d,null,null)},reRenderCount:{type:Number,required:!1,default:1},preRenderPageCount:{type:Number,required:!1,default:1}},setup(e){const u=f(0),o=f([]),i=u=>{const i=e.itemCount,n=[];if(!e.renderItem)return[];const p=u+(1+e.preRenderPageCount)*e.height,a=u-e.preRenderPageCount*e.height;for(let s=0;s<i;s++){const u=o.value[s],i=o.value[s+1];if(u<p&&i>a)n.push(e.renderItem({index:s,style:(d=l({},m),f={top:`${u}px`},t(d,r(f)))}));else if(n.length>0)break}var d,f;return n},n=()=>{const t=e.itemCount,r=[0];let u=0;for(let o=0;o<t;o++)"number"==typeof e.itemSize?u+=e.itemSize:"function"==typeof e.itemSize&&(u+=e.itemSize(o)),r.push(u);o.value=r},p=t=>{var r,o;const i=null!=(o=null==(r=t.target)?void 0:r.scrollTop)?o:0,n=i-u.value,l=e.height/2;n<l&&n>-l||(u.value=i)};return s((()=>e.reRenderCount),(()=>{n()})),n(),()=>a("div",{style:{width:`${e.width}px`,height:`${e.height}px`,overflow:"auto"},onScroll:p},[a("div",{style:{position:"relative",height:`${o.value[o.value.length-1]}px`}},[i(u.value)])])}});export default c;
